(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/cart/orderdetails"],{3024:function(t,e,n){},"654e":function(t,e,n){"use strict";n.r(e);var o=n("a870"),a=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);e["default"]=a.a},"8ff8":function(t,e,n){"use strict";n.r(e);var o=n("fac5"),a=n("654e");for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);n("c74b");var c=n("2877"),s=Object(c["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=s.exports},a870:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("a34a")),a=n("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){s(t,e,n[e])})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e,n,o,a,r,c){try{var s=t[r](c),i=s.value}catch(u){return void n(u)}s.done?e(i):Promise.resolve(i).then(o,a)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var r=t.apply(e,n);function c(t){i(r,o,a,c,s,"next",t)}function s(t){i(r,o,a,c,s,"throw",t)}c(void 0)})}}var d=function(){return n.e("components/uni-number-box").then(n.bind(null,"8cb0"))},l={components:{uniNumberBox:d},data:function(){return{total:0,allChecked:!1,empty:!1,cartList:[],orderTotalPrice:0,goodsId:0,goodsSkuId:0,token:"",address:{},orderId:null,freight:null,quantityNumber:"",commodityPrice:"",addressId:""}},onLoad:function(){var e=u(o.default.mark(function e(n){var a;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=this,console.log(n),a.orderId=n.id,a.loadData(),t.getStorage({key:"userInfo",success:function(t){console.log(t.data),a.token=t.data.token}}),console.log(a.hasLogin);case 6:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),computed:c({},(0,a.mapState)(["hasLogin"])),methods:{loadData:function(){var t=u(o.default.mark(function t(){var e,n;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,e.$axios(e.$baseUrl.shopCartList).then(function(t){var n=t.data.data;console.log(11111111,n),1==t.data.code&&(e.cartList=n.goods_list,e.address=n.address,e.freight=n.express_price,e.orderTotalPrice=n.order_pay_price,e.quantityNumber=n.order_total_num,e.commodityPrice=n.order_total_price)},function(t){console.log(t)}),t.next=4,this.$api.json("cartList");case 4:n=t.sent,n.map(function(t){return t.checked=!0,t});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onShow:function(){var t=getCurrentPages(),e=t[t.length-1];console.log(111,e.data.addressId),""!=e.data.addressId&&this.getAdressDetail(e.data.addressId)},getAdressDetail:function(e){var n=this;n.$axios(n.$baseUrl.getAdressDetail,{id:e}).then(function(e){var o=e.data.data;console.log(o),1==e.data.code?(n.address=o.detail,n.addressId=o.detail.address_id):0==e.data.code&&t.showToast({title:"请选择收货地址",icon:"success"})},function(t){console.log(t)})},onImageLoad:function(t,e){this.$set(this[t][e],"loaded","loaded")},onImageError:function(t,e){this[t][e].image="/static/errorImage.jpg"},navToLogin:function(){t.navigateTo({url:"/pages/public/login"})},numberChange:function(t){this.cartList[t.index].number=t.number,this.calcTotal()},deleteCartItem:function(e){var n=this;console.log(11111111111,e);var o=e.goods_id,a=e.goods_sku_id;t.showModal({title:"删除提示",content:"你将删除这个商品",success:function(e){e.confirm?n.$axios(n.$baseUrl.delCart,{goods_id:o,goods_sku_id:a}).then(function(e){1==e.data.code&&t.showToast({title:"删除成功",icon:"success"})},function(t){console.log(t)}):e.cancel&&console.log("用户点击取消")}}),this.calcTotal(),t.hideLoading()},clearCart:function(){var e=this,n=this;t.showModal({title:"清空提示",content:"你要清空购物车里面的商品吗？",success:function(o){o.confirm?n.$axios(n.$baseUrl.clearAllCart,{token:n.token}).then(function(n){1==n.data.code&&(t.showToast({title:"删除成功",icon:"success"}),e.loadData())},function(t){console.log(t)}):o.cancel&&console.log("用户点击取消")}})},createOrder:function(){var t=this;t.$axios(t.$baseUrl.cartPay,{address_id:t.addressId}).then(function(t){var e=t.data.data;console.log(111111111,t),1==t.data.code&&wx.requestPayment({timeStamp:e.timestamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(t){console.log("支付成功")},fail:function(t){console.log(t),App.showError("订单未支付",function(){})}})},function(t){console.log(t)})},changeAddress:function(){console.log("1111更改地址"),t.navigateTo({url:"/pages/user/address/address"})},commodityDetails:function(e){t.navigateTo({url:"/pages/product/product?id=".concat(e)})}}};e.default=l}).call(this,n("543d")["default"])},c74b:function(t,e,n){"use strict";var o=n("3024"),a=n.n(o);a.a},fac5:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})}},[["45ef","common/runtime","common/vendor"]]]);