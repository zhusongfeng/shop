(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"5cc8":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},"8f35":function(t,e,a){},ac4e:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(a("a34a"));o(a("d361"));function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e,a,n,o,i,r){try{var d=t[i](r),s=d.value}catch(u){return void a(u)}d.done?e(s):Promise.resolve(s).then(n,o)}function r(t){return function(){var e=this,a=arguments;return new Promise(function(n,o){var r=t.apply(e,a);function d(t){i(r,n,o,d,s,"next",t)}function s(t){i(r,n,o,d,s,"throw",t)}d(void 0)})}}var d=function(){return a.e("components/uni-load-more/uni-load-more").then(a.bind(null,"bba5"))},s={components:{uniLoadMore:d},data:function(){return{tabCurrentIndex:0,navList:[{state:0,text:"全部"},{state:1,text:"待付款"},{state:2,text:"待收货"},{state:3,text:"退款/售后"}],orderList:[],loadingType:"more",total:0,pageSize:0,page:1,nextPage:!1,searchKey:""}},onLoad:function(){var t=r(n.default.mark(function t(e){return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.state),this.tabCurrentIndex=+e.state,0==e.state&&this.loadData();case 3:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),methods:{loadData:function(){var t=this;t.$axios(t.$baseUrl.getOrderList,{page:t.page,params:t.searchKey}).then(function(e){console.log("获取订单列表",e.data.data);var a=e.data.data;1==e.data.code&&(t.nextPage?a.data.forEach(function(e){t.orderList.push(e)}):t.orderList=a.data,t.pageSize=a.per_page,t.total=a.total,t.page=a.current_page,t.total>t.pageSize*t.page?(t.loadingType="more",t.nextPage=!0):(t.loadingType="nomore",t.nextPage=!1))},function(t){console.log(t)}),"loading"!==t.loadingType&&(t.loadingType="loading")},changeTab:function(t){this.tabCurrentIndex=t.target.current,this.orderList=[],this.pageSize=0,this.total=0,this.page=1,0==this.tabCurrentIndex?this.loadData():1==this.tabCurrentIndex?this.unpaid():2==this.tabCurrentIndex?this.unshipped():3==this.tabCurrentIndex&&this.afterSale()},tabClick:function(t){this.tabCurrentIndex=t,this.orderList=[],this.pageSize=0,this.total=0,this.page=1,0==this.tabCurrentIndex?this.loadData():1==this.tabCurrentIndex?this.unpaid():2==this.tabCurrentIndex?this.unshipped():3==this.tabCurrentIndex&&this.afterSale()},deleteOrder:function(e){var a=this;t.showLoading({title:"请稍后"}),setTimeout(function(){a.navList[a.tabCurrentIndex].orderList.splice(e,1),t.hideLoading()},600)},cancelOrder:function(e){var a=this,n=e.id;console.log(111111,e),a.$axios(a.$baseUrl.cancel,{id:n}).then(function(e){1==e.data.code&&(t.showToast({title:"取消成功成功",icon:"success"}),a.loadData())},function(t){console.log(t)})},refundOperation:function(e){var a=this,n=e.id;console.log(111111,e),a.$axios(a.$baseUrl.refundMoney,{id:n}).then(function(e){1==e.data.code&&(t.showToast({title:"退款成功",icon:"success"}),a.loadData())},function(t){console.log(t)})},loadMore:function(){console.log("触发加载更多");var t=this;t.nextPage&&(t.page=t.page+1,0==t.tabCurrentIndex?t.loadData():1==t.tabCurrentIndex?t.unpaid():2==t.tabCurrentIndex?t.unshipped():3==t.tabCurrentIndex&&t.afterSale())},unpaid:function(){var t=this;t.$axios(t.$baseUrl.unpayorderlist,{page:t.page}).then(function(e){console.log("获取订单列表",e.data.data);var a=e.data.data;1==e.data.code&&(t.nextPage?a.data.forEach(function(e){t.orderList.push(e)}):t.orderList=a.data,t.pageSize=a.per_page,t.total=a.total,t.page=a.current_page,t.total>t.pageSize*t.page?(t.loadingType="more",t.nextPage=!0):(t.loadingType="nomore",t.nextPage=!1))},function(t){console.log(t)}),"loading"!==t.loadingType&&(t.loadingType="loading")},unshipped:function(){var t=this;t.$axios(t.$baseUrl.unfreightlist,{page:t.page}).then(function(e){console.log("获取订单列表",e.data.data);var a=e.data.data;1==e.data.code&&(t.nextPage?a.data.forEach(function(e){t.orderList.push(e)}):t.orderList=a.data,t.pageSize=a.per_page,t.total=a.total,t.page=a.current_page,t.total>t.pageSize*t.page?(t.loadingType="more",t.nextPage=!0):(t.loadingType="nomore",t.nextPage=!1))},function(t){console.log(t)}),"loading"!==t.loadingType&&(t.loadingType="loading")},afterSale:function(){var t=this;t.$axios(t.$baseUrl.finishList,{page:t.page}).then(function(e){console.log("获取订单列表",e.data.data);var a=e.data.data;1==e.data.code&&(t.nextPage?a.data.forEach(function(e){t.orderList.push(e)}):t.orderList=a.data,t.pageSize=a.per_page,t.total=a.total,t.page=a.current_page,t.total>t.pageSize*t.page?(t.loadingType="more",t.nextPage=!0):(t.loadingType="nomore",t.nextPage=!1))},function(t){console.log(t)}),"loading"!==t.loadingType&&(t.loadingType="loading")},onSearch:function(){var t=this;t.loadData()},onSearchchange:function(){var t=this;""!=t.searchKey&&t.loadData()},orderDetails:function(e){t.navigateTo({url:"/pages/cart/orderdetails?id=".concat(e)})}}};e.default=s}).call(this,a("543d")["default"])},afcf:function(t,e,a){"use strict";var n=a("8f35"),o=a.n(n);o.a},e508:function(t,e,a){"use strict";a.r(e);var n=a("ac4e"),o=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=o.a},e67c:function(t,e,a){"use strict";a.r(e);var n=a("5cc8"),o=a("e508");for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);a("afcf");var r=a("2877"),d=Object(r["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=d.exports}},[["0f31","common/runtime","common/vendor"]]]);